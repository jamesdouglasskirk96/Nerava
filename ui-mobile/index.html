<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#0B5FFF">
  <title>Nerava • Mobile</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" href="assets/icon-192.png">
  <script>
    // Configure backend + defaults (override in browser localStorage if you want):
    window.NERAVA_BASE  = localStorage.getItem("NERAVA_BASE")  || "http://127.0.0.1:8000";
    window.NERAVA_USER  = localStorage.getItem("NERAVA_USER")  || "demo@nerava.app";
    window.NERAVA_PREFS = localStorage.getItem("NERAVA_PREFS") || "coffee_bakery,quick_bite";
  </script>
</head>
<body>
  <header class="topbar">
    <img src="assets/logo.svg" alt="Nerava" class="logo">
    <div class="brand">Nerava</div>
  </header>

  <main id="app">
    <div id="map"></div>

    <section id="recommend-card" class="card hidden">
      <div class="card-row">
        <div class="card-title" id="rec-name">Recommended hub</div>
        <div class="pill" id="rec-status">—</div>
      </div>
      <div class="card-sub" id="rec-sub">—</div>
      <div class="card-row">
        <button id="btn-reserve" class="btn btn-primary">Reserve 30 min</button>
        <button id="btn-directions" class="btn btn-ghost">Navigate</button>
      </div>
      <div class="merchants" id="merchant-strip"></div>
    </section>
  </main>

  <nav class="bottombar">
    <button class="navbtn active" data-view="home"><span>Home</span></button>
    <button class="navbtn" data-view="plan-charge"><span>Plan</span></button>
    <button class="navbtn" data-view="plan-trip"><span>Trip</span></button>
    <button class="navbtn" data-view="wallet"><span>Wallet</span></button>
  </nav>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
          integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

  <script src="js/app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => navigator.serviceWorker.register('sw.js').catch(()=>{}));
    }
  </script>
</body>
</html>
