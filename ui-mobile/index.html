<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nerava</title>

  <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/tokens.css" />
    <link rel="stylesheet" href="css/animations.css" />
    <link rel="stylesheet" href="css/appleish.css" />
  <link rel="icon" href="assets/favicon.ico" />

  <!-- Leaflet core -->
  <link rel="stylesheet"
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
          integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin="" defer></script>

  <!-- Routing (for turn-by-turn path on map) -->
  <link rel="stylesheet"
        href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css">
  <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.min.js" defer></script>
</head>
<body>
  <div id="app">
    <!-- MAP lives behind everything -->
    <div id="map"></div>

    <!-- Top bar -->
    <header class="ui-layer app-top">
      <div class="brandbar">
        <span class="brand-word">NERAVA</span>
        <svg class="brand-bolt" width="16" height="16" viewBox="0 0 24 24" aria-hidden="true" style="margin-left:6px; fill: var(--brand-yellow-500);">
          <path d="M13 2L3 14h7l-1 8 10-12h-7l1-8z"></path>
        </svg>
      </div>
    </header>

    <!-- PAGES -->
    <main class="ui-layer main-layer">
      <!-- EXPLORE: Map-first + Bottom Sheet -->
      <section id="pageExplore" class="page active">
        <div id="map" class="map"></div>

        <!-- Incentive banner -->
        <div id="incentive-banner" class="banner" style="display:none"></div>

        <!-- Bottom Sheet (Place Panel) -->
        <div id="place-sheet" class="sheet" aria-modal="true" aria-labelledby="place-title" role="dialog">
          <div class="sheet__grabber" aria-hidden="true"></div>

          <!-- Large Title & Meta -->
          <div class="sheet__header">
            <h2 id="place-title" class="ios-title">Tesla Supercharger</h2>
            <div class="meta-row">
              <span class="chip"><span class="icon">üöó</span><span id="chip_chargers">12 Chargers</span></span>
              <span class="chip"><span class="icon">üí≤</span><span id="chip_pricing">Paid</span></span>
              <span class="chip"><span class="icon">üìè</span><span id="chip_distance">3.4 mi</span></span>
            </div>
            <div class="actions">
              <button class="act" id="act_nav"    aria-label="Navigate">üß≠<span>7 min</span></button>
              <button class="act" id="act_call"   aria-label="Call">üìû<span>Call</span></button>
              <button class="act" id="act_web"    aria-label="Website">üß∑<span>Website</span></button>
              <button class="act" id="act_more"   aria-label="More">‚ãØ<span>More</span></button>
            </div>
          </div>

          <!-- Sections -->
          <div class="section">
            <h3 class="section__title">Chargers</h3>
            <ul id="charger-list" class="list list--chargers"></ul>
          </div>

          <div class="section">
            <h3 class="section__title">Nearby Places</h3>
            <div id="nearby-places" class="cards cards--nearby"></div>
          </div>

          <div class="section section--rate">
            <h3 class="section__title">Rate This Place</h3>
            <div class="rate-row">
              <button class="rate-btn" id="rate_up"  aria-label="Thumbs up">üëç</button>
              <button class="rate-btn" id="rate_down" aria-label="Thumbs down">üëé</button>
            </div>
          </div>

          <div class="section">
            <div class="section__title-row">
              <h3 class="section__title">Activity</h3>
              <a class="view-all" id="activity_view_all">View all</a>
            </div>
            <ul id="place-activity" class="feed feed--compact"></ul>
          </div>

          <div style="height: 24px"></div>
        </div>
      </section>

      <!-- Charge -->
      <section id="pageCharge" class="page">
        <div id="chargePane" class="pane">
          <div class="card" id="chargeStatusCard" style="margin:12px;">
            <h3>Charging activity</h3>

            <!-- Cumulative kWh total -->
            <div id="cumulativeKwh" style="margin:8px 0; padding:10px; border:1px solid #e5e7eb; border-radius:12px; background:#f9fafb;">
              <div><strong>Total charged:</strong> <span id="totalKwh">0.0</span> kWh</div>
            </div>

            <!-- Live window / reward preview -->
            <div id="rewardPreview" style="display:none; margin:8px 0; padding:10px; border-radius:12px; background:#0B2A4A; color:#fff;">
              <div id="rewardPreviewText" style="font-weight:600;"></div>
              <div id="rewardPreviewSub" style="opacity:0.85; font-size:0.9em;"></div>
            </div>

            <!-- Active session status -->
            <div id="activeSession" style="display:none; margin:8px 0; padding:10px; border:1px solid #e5e7eb; border-radius:12px;">
              <div><strong>Session:</strong> <span id="sessionIdShort"></span></div>
              <div><strong>Started:</strong> <span id="sessionStart"></span></div>
              <div><strong>Elapsed:</strong> <span id="sessionElapsed"></span></div>
            </div>

            <!-- Controls -->
            <div id="chargeControls" style="margin-top:10px; display:flex; gap:8px;">
              <button id="btnStartCharge" class="btn btn-primary" style="flex:1;">Start charging</button>
              <button id="btnStopCharge" class="btn btn-secondary" style="flex:1;" disabled>Stop & credit</button>
            </div>

            <!-- kWh prompt (shown on stop) -->
            <dialog id="kwhDialog" style="z-index:3000;">
              <form method="dialog" style="min-width:260px;">
                <h4>How many kWh did you add?</h4>
                <input id="kwhInput" type="number" min="0.1" step="0.1" placeholder="e.g. 18.6" required style="width:100%; padding:8px; margin:8px 0;">
                <menu style="display:flex; gap:8px; justify-content:flex-end;">
                  <button data-return="cancel">Cancel</button>
                  <button data-return="confirm">Confirm</button>
                </menu>
              </form>
            </dialog>
          </div>


          <!-- Community Activity (Venmo-style) -->
          <section id="communityActivity" class="card" style="margin:12px;">
            <div class="card-header">
              <h3>Community Activity</h3>
              <div class="seg">
                <button id="feedAllBtn" class="seg-btn active">All</button>
                <button id="feedFollowingBtn" class="seg-btn">Following</button>
              </div>
            </div>
            <ul id="activityFeed" class="feed-list">
              <!-- items injected -->
            </ul>
          </section>
        </div>
      </section>

      <!-- Wallet -->
      <section id="pageWallet" class="page">
        <section class="card content-card">
          <h2 class="section-title">Wallet</h2>
          <div class="balance" id="wallet-balance">$19.00</div>
          <div class="muted">Ways you earned</div>
          
          <!-- Progress bar toward next tier -->
          <div class="wallet-progress" style="margin:8px 0 12px;">
            <div class="bar" style="width:0"></div>
          </div>
          
          <!-- Streak indicator -->
          <div class="streak-indicator" style="margin: 8px 0; padding: 8px; background: var(--color-orange); border-radius: var(--radius); text-align: center;">
            <span class="streak-text">7-day charging streak üî•</span>
          </div>
          
          <ul class="list" id="wallet-activity">
            <li><span>You saved $3.73 during Green Hour üåû</span><strong>+$3.73</strong></li>
            <li><span>Earned $0.75 from Starbucks co-fund ‚òï</span><strong>+$0.75</strong></li>
            <li><span>Off-peak award</span><strong>+$0.50</strong></li>
          </ul>
        </section>
      </section>

      <!-- Profile -->
      <section id="pageProfile" class="page">
        <section class="card content-card">
          <h2 class="section-title">Profile</h2>
          <p class="muted">Signed in as demo@nerava.app</p>
          <div class="prefs">
            <label><input type="checkbox" checked> Coffee & Bakery</label>
            <label><input type="checkbox" checked> Quick Bites</label>
            <label><input type="checkbox"> Dog Friendly</label>
            <label><input type="checkbox"> Kid Friendly</label>
            <label><input type="checkbox"> Shopping</label>
          </div>
          <div class="row gap">
            <button class="btn pill-btn">Save Preferences</button>
            <button class="btn pill-btn">See New Recommendation</button>
          </div>
        </section>
      </section>
    </main>

    <!-- Bottom nav -->
    <nav class="ui-layer bottom-nav">
      <button id="tabExplore" class="tab active">
        <img src="assets/nav-explore.svg" alt=""><span>Explore</span>
      </button>
      <button id="tabCharge" class="tab">
        <img src="assets/nav-charge.svg" alt=""><span>Charge</span>
      </button>
      <button id="tabWallet" class="tab">
        <img src="assets/nav-wallet.svg" alt=""><span>Wallet</span>
      </button>
      <button id="tabProfile" class="tab">
        <img src="assets/nav-profile.svg" alt=""><span>Profile</span>
      </button>
    </nav>
  </div>

  <script src="js/animations.js"></script>
  <script src="js/app.js?v=10" defer></script>
</body>
</html>
