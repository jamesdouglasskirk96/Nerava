# Nerava Environment Variables
# Copy this file to .env and fill in your values

# Square API Configuration
SQUARE_ENV=sandbox
SQUARE_ACCESS_TOKEN=REPLACE_ME
SQUARE_LOCATION_ID=REPLACE_ME
SQUARE_WEBHOOK_SIGNATURE_KEY=REPLACE_ME
SQUARE_APPLICATION_ID=REPLACE_ME

# Database Configuration
DATABASE_URL=sqlite:///./nerava.db

# Public API Base URL (for redirects and webhooks)
PUBLIC_BASE_URL=http://127.0.0.1:8001

# JWT Settings (for verify flow)
# REQUIRED in non-local environments: Must be a secure random value, not equal to DATABASE_URL
# Generate with: python -c 'from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())'
JWT_SECRET=dev-secret
JWT_ALG=HS256

# Verify Rewards
VERIFY_REWARD_CENTS=200

# Stripe Connect
# STRIPE_SECRET: Stripe secret key (required for real payouts, optional in local - payouts simulated if not set)
STRIPE_SECRET=sk_test_...
# STRIPE_CONNECT_CLIENT_ID: Stripe Connect client ID (optional)
STRIPE_CONNECT_CLIENT_ID=ca_...
# STRIPE_WEBHOOK_SECRET: REQUIRED in non-local environments for webhook verification
# Get from Stripe Dashboard → Webhooks → Signing secret
STRIPE_WEBHOOK_SECRET=whsec_...

# Payout Policy
PAYOUT_MIN_CENTS=100
PAYOUT_MAX_CENTS=10000
PAYOUT_DAILY_CAP_CENTS=20000

# Purchase Rewards
PURCHASE_REWARD_FLAT_CENTS=150
PURCHASE_MATCH_RADIUS_M=120
PURCHASE_SESSION_TTL_MIN=30
WEBHOOK_SHARED_SECRET=

# Anti-Fraud
MAX_VERIFY_PER_HOUR=6
MAX_SESSIONS_PER_HOUR=6
MAX_DIFFERENT_IPS_PER_DAY=5
MIN_ALLOWED_ACCURACY_M=100
MAX_GEO_JUMP_KM=50
BLOCK_SCORE_THRESHOLD=100

# Merchant Dashboard
DASHBOARD_ENABLE=true

# Demo Mode (relaxes time window restrictions for testing/demos)
DEMO_MODE=true
DEMO_ADMIN_KEY=demo-admin-key

# Token Encryption
# REQUIRED in non-local environments for secure token storage (Square tokens, vehicle tokens)
# Generate with: python -c 'from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())'
# Must be exactly 44 characters (base64-encoded 32-byte Fernet key)
TOKEN_ENCRYPTION_KEY=TaHJDO442DD22r5y-jQYw_ig0MUouqbA0LjCS7e9C2M=

# CORS Configuration (comma-separated list of origins, e.g., https://nerava.com,https://app.nerava.com)
# IMPORTANT: Never use "*" in production. Use explicit origins separated by commas.
# Example: ALLOWED_ORIGINS=https://app.nerava.com,https://www.nerava.com
ALLOWED_ORIGINS=https://<YOUR_PROD_FRONTEND_DOMAIN>,https://<YOUR_PROD_API_DOMAIN>

# Development Settings
DEV_WEBHOOK_BYPASS=true
DEMO_USER_ID=user-demo-1

# Production Database (uncomment for PostgreSQL)
# DATABASE_URL=postgresql://user:password@localhost:5432/nerava

# While You Charge API Keys
# NREL: Get free key at https://developer.nrel.gov/signup/
NREL_API_KEY=your_nrel_key_here
# Google Places: Same key works for Places API and Distance Matrix API
# Can use GOOGLE_PLACES_API_KEY, GOOGLE_MAPS_API_KEY, or GOOGLE_API_KEY
GOOGLE_PLACES_API_KEY=your_google_places_key_here

# Pilot Hub Configuration
# Set to "domain" to seed only Domain hub data (instead of generic demo data)
PILOT_HUB=

# Apple Wallet Configuration
APPLE_WALLET_SIGNING_ENABLED=false
APPLE_WALLET_PASS_TYPE_ID=pass.com.nerava.wallet
APPLE_WALLET_TEAM_ID=
APPLE_WALLET_CERT_P12_PATH=
APPLE_WALLET_CERT_P12_PASSWORD=
APPLE_WALLET_APNS_KEY_ID=
APPLE_WALLET_APNS_TEAM_ID=
APPLE_WALLET_APNS_AUTH_KEY_PATH=

# Google SSO Configuration
GOOGLE_CLIENT_ID=

# HubSpot Integration (dry-run mode)
HUBSPOT_ENABLED=false
HUBSPOT_SEND_LIVE=false
HUBSPOT_PRIVATE_APP_TOKEN=
HUBSPOT_PORTAL_ID=

